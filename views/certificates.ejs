<%- include('partials/header') %>
<% const isEn = currentLang === 'en'; %>

<main class="page-container">
    <div class="container">
        <section class="certificates-section">
            <h1><%= isEn ? 'Certificates' : 'Сертификаты' %></h1>
            <p class="section-description"><%= isEn
                ? 'Professional certifications and achievements in networking and security.'
                : 'Профессиональные сертификаты и достижения в сфере сетей и безопасности.' %></p>
            
            <div class="certificates-grid">
                <% if (certificates && certificates.length > 0) { %>
                    <% certificates.forEach(cert => { %>
                        <div class="certificate-card js-open-cert-modal" data-image="<%= cert.image %>" data-title="<%= cert.title %>">
                            <div class="certificate-image">
                                <img src="<%= cert.image %>" alt="<%= cert.title %>" loading="lazy" decoding="async">
                            </div>
                            <div class="certificate-info">
                                <h3><%= cert.title %></h3>
                                <% if (cert.description) { %>
                                    <p><%= cert.description %></p>
                                <% } %>
                                <% if (cert.issueDate) { %>
                                    <p class="cert-date"><%= isEn ? 'Issued:' : 'Выдан:' %> <%= new Date(cert.issueDate).toLocaleDateString() %></p>
                                <% } %>
                            </div>
                        </div>
                    <% }); %>
                <% } else { %>
                    <div class="empty-state">
                        <p><%= isEn ? 'No certificates available.' : 'Сертификаты пока не добавлены.' %></p>
                    </div>
                <% } %>
            </div>
        </section>
    </div>
</main>

<!-- Modal -->
<div id="imageModal" class="modal">
    <span class="close">&times;</span>
    <img class="modal-content" id="modalImage">
    <div class="modal-caption" id="modalCaption"></div>
</div>

<script nonce="<%= cspNonce %>">
function openModal(imageSrc, title) {
    const modal = document.getElementById('imageModal');
    const modalImg = document.getElementById('modalImage');
    const modalCaption = document.getElementById('modalCaption');
    
    modal.style.display = 'block';
    modalImg.src = imageSrc;
    modalCaption.textContent = title;
}

const modal = document.getElementById('imageModal');
const closeBtn = document.querySelector('.close');
document.querySelectorAll('.js-open-cert-modal').forEach((card) => {
    card.addEventListener('click', () => {
        openModal(card.getAttribute('data-image') || '', card.getAttribute('data-title') || '');
    });
});

closeBtn.onclick = function() {
    modal.style.display = 'none';
}

window.onclick = function(event) {
    if (event.target === modal) {
        modal.style.display = 'none';
    }
}
</script>

<%- include('partials/footer') %>




