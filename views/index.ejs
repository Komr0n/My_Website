<%- include('partials/header') %>

<% const homeSettings = (siteSettings && siteSettings.home) ? siteSettings.home : null; %>
<% const terminalCommands = (homeSettings && Array.isArray(homeSettings.terminalCommands) && homeSettings.terminalCommands.length) ? homeSettings.terminalCommands : ['systemctl status network', 'cat /etc/hostname', 'ping -c 4 8.8.8.8', 'ls -la /opt', 'ps aux | grep nginx', 'whoami && pwd']; %>
<% const heroTitle = homeSettings && homeSettings.heroTitle ? homeSettings.heroTitle : (about ? `${about.title} - ${about.content}` : 'System Administrator & Security Enthusiast'); %>
<% const heroDescription = homeSettings && homeSettings.heroDescription ? homeSettings.heroDescription : 'Networking | Automation | Information Security'; %>
<% const homeButtons = (homeSettings && homeSettings.buttons) ? homeSettings.buttons : { about: 'About Me', projects: 'View Projects', certificates: 'Certificates', contact: 'Contact' }; %>

<main class="hero">
    <div class="hero-content">
        <div class="terminal-window">
            <div class="terminal-header">
                <span class="terminal-button"></span>
                <span class="terminal-button"></span>
                <span class="terminal-button"></span>
            </div>
            <div class="terminal-body">
                <div class="terminal-line">
                    <span class="terminal-prompt">$</span>
                    <span class="terminal-text" id="typing-text"></span>
                    <span class="cursor">_</span>
                </div>
            </div>
        </div>
        
        <h1 class="hero-title"><%= heroTitle %></h1>
        <p class="hero-description"><%= heroDescription %></p>
        
        <div class="hero-buttons">
            <a href="/about" class="btn btn-primary"><%= homeButtons.about %></a>
            <a href="/projects" class="btn btn-secondary"><%= homeButtons.projects %></a>
            <a href="/certificates" class="btn btn-secondary"><%= homeButtons.certificates %></a>
            <a href="/contact" class="btn btn-outline"><%= homeButtons.contact %></a>
        </div>
    </div>
    
    <div class="hero-bg">
        <div class="grid-bg"></div>
    </div>
</main>

<script nonce="<%= cspNonce %>">
document.addEventListener('DOMContentLoaded', function() {
    const texts = <%- JSON.stringify(terminalCommands) %>;
    const typingElement = document.getElementById('typing-text');
    const reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    if (!typingElement || !texts.length) {
        return;
    }

    if (reduceMotion) {
        typingElement.textContent = texts[0];
        return;
    }

    let textIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    let timerId = null;
    
    function typeText() {
        if (document.hidden) {
            timerId = setTimeout(typeText, 400);
            return;
        }

        const currentText = texts[textIndex];
        
        if (isDeleting) {
            typingElement.textContent = currentText.substring(0, charIndex - 1);
            charIndex--;
            
            if (charIndex === 0) {
                isDeleting = false;
                textIndex = (textIndex + 1) % texts.length;
            }
        } else {
            typingElement.textContent = currentText.substring(0, charIndex + 1);
            charIndex++;
            
            if (charIndex === currentText.length) {
                isDeleting = true;
                timerId = setTimeout(typeText, 2000);
                return;
            }
        }
        
        timerId = setTimeout(typeText, isDeleting ? 50 : 100);
    }
    
    window.addEventListener('beforeunload', function() {
        if (timerId) {
            clearTimeout(timerId);
        }
    });

    typeText();
});
</script>

<%- include('partials/footer') %>

